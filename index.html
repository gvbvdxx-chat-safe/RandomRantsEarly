<!DOCTYPE html>
<html style="">
  <head>
    <title>Random Rants</title>
    <link rel="manifest" href="manifest.webmanifest" />
    <link rel="icon" href="favicon.png" />
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <link href="https://fonts.googleapis.com/css2?family=Permanent+Marker&family=Pixelify+Sans:wght@400..700&family=Tektur:wght@400..900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Permanent+Marker&family=Pixelify+Sans:wght@400..700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Pixelify+Sans:wght@400..700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Jersey+15&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Jacquard+12+Charted&family=Jersey+15&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&family=Jacquard+12+Charted&family=Jersey+15&display=swap" rel="stylesheet">

	<!--Insert this script to a GvbvdxxChat based site to simulate servers in your browser-->
	<script>
	  class WebSocket {
	    static get CONNECT_SPEED_MS() {
	      //How many miliseconds would the initial connection speed be?
	      return 1000;
	    }
	    static get CHECK_RATE_MS() {
	      //Change this to adjust the speed of how fast the fake websocket can scan for new message data.
	      return 1000 / 60;
	    }
	    static get SOCKET_STORAGE_URL_PREFIX() {
	      return "FakeSocket-"; //This makes the local storage store stuff like: FakeSocket-ws://someserver.com
	    }
	
	    constructor(providedURL) {
	      if (typeof providedURL !== "string") {
	        throw new Error("Specified ws:// or wss:// URL must be a string");
	        return;
	      }
	      var url = providedURL.trim();
	      if (!url.startsWith("ws://") && !url.startsWith("wss://")) {
	        throw new Error(
	          "The websocket server url must start with ws:// or wss://"
	        );
	        return;
	      }
	      var t = this;
	      this.events = {
	        emit: function (name, ...values) {
	          if (!this[name]) return;
	          this[name].forEach((f) => {
	            f.apply(t, values);
	          });
	        },
	        open: [],
	        close: [],
	        message: [],
	      };
	      this.onmessage = function () {};
	      this.onopen = function () {};
	      this.onclose = function () {};
	
	      this.url = url;
	      this._isOpen = false;
	      // Tracks the timestamp of the last message this instance has processed
	      this._curTime = 0;
	
	      // Simulate async connection
	      setTimeout(() => {
	        t.events.emit("open");
	        if (t.onopen) {
	          t.onopen();
	        }
	        t._isOpen = true;
	      }, WebSocket.CONNECT_SPEED_MS); // Shortened delay
	
	      // Check for messages on a more reasonable interval than 1ms
	      this.checkInterval = setInterval(
	        this._checkMessage.bind(this),
	        WebSocket.CHECK_RATE_MS
	      );
	
	      console.log("Safe browser testing enviroment echo url made for: " + url);
	    }
	
	    close() {
	      clearInterval(this.checkInterval);
	      this._isOpen = false;
	      this.events.emit("close");
	      if (this.onclose) {
	        this.onclose();
	      }
	    }
	
	    /**
	     * Checks localStorage for any new messages we haven't processed yet.
	     */
	    _checkMessage() {
	      if (!this._isOpen) {
	        return;
	      }
	
	      const storageValue = localStorage.getItem(this.url);
	      if (!storageValue) {
	        return;
	      }
	
	      let allMessages = [];
	      try {
	        allMessages = JSON.parse(storageValue);
	        if (!Array.isArray(allMessages)) allMessages = [];
	      } catch (e) {
	        allMessages = [];
	      }
	
	      // Find all messages that are newer than the last one we processed
	      const newMessages = allMessages.filter((msg) => msg.time > this._curTime);
	
	      if (newMessages.length > 0) {
	        // Process all new messages
	        for (const msg of newMessages) {
	          this._emitMessage(msg.data);
	        }
	
	        // Update our "last processed" time to the latest message's time
	        this._curTime = newMessages[newMessages.length - 1].time;
	      }
	    }
	
	    /**
	     * Emits a message event to the application.
	     */
	    _emitMessage(msg) {
	      const event = { data: msg.toString() };
	      this.events.emit("message", event);
	      if (this.onmessage) {
	        this.onmessage(event);
	      }
	    }
	
	    /**
	     * "Sends" a message by adding it to the queue in localStorage.
	     */
	    send(msg = "") {
	      const now = Date.now();
	      const storageValue = localStorage.getItem(this.url) || "[]";
	
	      let allMessages = [];
	      try {
	        allMessages = JSON.parse(storageValue);
	        if (!Array.isArray(allMessages)) allMessages = [];
	      } catch (e) {
	        allMessages = [];
	      }
	
	      // Add the new message
	      allMessages.push({
	        time: now,
	        data: msg.toString(),
	      });
	
	      // --- Pruning Logic ---
	      // To prevent localStorage from growing forever, we'll prune messages
	      // that are older than 5 seconds.
	      const fiveSecondsAgo = now - 5000;
	      const prunedMessages = allMessages.filter(
	        (msg) => msg.time >= fiveSecondsAgo
	      );
	
	      localStorage.setItem(this.url, JSON.stringify(prunedMessages));
	    }
	
	    addEventListener(eventName, func) {
	      if (!this.events[eventName]) {
	        this.events[eventName] = [];
	      }
	      this.events[eventName].push(func);
	    }
	  }
	</script>
  </head>
  <body>
    <style>
      :root {
        --bg-color: #b8b8b8;
        --header-color: #b8b8b8;

        --main-font: arial;

        --main-text-color: black;

        --input-bg-color: #363636;
        --input-text-color: #c9c9c9;
        --input-border-color: #1f1f1f;
        --input-border-width: 3px;

        --messages-bg-color: #919191;
        --messages-text-color: #fcfcfc;

        --profile-background: #969696;
        --profile-border-color: #7d7d7d;

        --separator-color: #696969;

        --textbox-bg-color: #e0e0e0;
        --textbox-border-color: #696969;

        --button-bg-color: #e0e0e0;
        --button-text-color: #696969;
        --button-hover-bg-color: #f2f2f2;
        --button-disabled-color: #5e5e5e;

        --loading-spinner-color: #878787;

        --border-radius: 3px;
        --profile-border-radius: 64px;

        --spinner-rotation-seconds: 1.34s;
        
        --popup-box-bg-color: white;
        --popup-box-text-color: black;
        
        --link-text-color: #4287f5;
        
        --main-font-size: 15px;
        
        --selected-emoji-popup-dialog-bg-color: #15e64d;
        --selected-emoji-popup-dialog-border-color: #23a646;
        --selected-emoji-popup-dialog-border-width: 2px;
        --selected-emoji-popup-dialog-text-color: #e6ffec;
        
        --server-notifcation-color: #ffd000;
        
        --default-font-weight: 0px;
      }

      /* width */
      ::-webkit-scrollbar {
        width: 15px;
      }

      /* Track */
      ::-webkit-scrollbar-track {
        background: var(--bg-color);
        border-radius: var(--border-radius);
      }

      /* Handle */
      ::-webkit-scrollbar-thumb {
        background: var(--button-bg-color);
        border-radius: var(--border-radius);
      }

      /* Handle on hover */
      ::-webkit-scrollbar-thumb:hover {
        background: var(--button-hover-bg-color);
      }
      body {
        background-color: var(--bg-color);
        color: var(--main-text-color);
        font-family: var(--main-font);
        cursor: default;
        font-size: var(--main-font-size);
        font-weight: var(--default-font-weight);
      }
      .textBoxColors {
        background-color: var(--textbox-bg-color);
        color: var(--textbox-border-color);
        font-family: var(--main-font);
      }
      .inputText1 {
        resize: none;
        font-size: 20px;
        width: 30%;
        height: 5%;
        border: none;
        background-color: var(--input-bg-color);
        color: var(--input-text-color);
        border-style: solid;
        border-width: var(--input-border-width);
        border-color: var(--input-border-color);
        outline: none;
        font-family: var(--main-font);
      }
      .sep1 {
        border-top: 3px dashed var(--separator-color);
        height: 20px;
        margin-top: 20px;
        outline: none;
      }
      .roundborder {
        border-radius: var(--border-radius);
        outline: none;
      }
      .profile {
        outline: none;
        border-radius: var(--profile-border-radius);
        border-style: solid;
        border-width: 1.7px;
        border-color: var(--profile-border-color);
        background: var(--profile-background);
        position: relative;
        top: 0px;
      }
      #screenCaptureDiv {
        position: fixed;
        top: 0;
        right: 0;
        image-rendering: pixelated;
        background: var(--bg-color);
      }
      .fullscreenView {
        outline: none;
        width: 100%;
        height: 100%;
      }
      .defaultView {
        outline: none;
        width: 400px;
        height: 290px;
      }
    </style>
    <center hidden id="appMain">
      <div
        style="
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          background: var(--header-color);
          height: 40px;
          display:flex;
        "
      >
        <div style="position:relative;left: calc(50% - 63px);">
          <img src="favicon.png" height="32"  /><span style="line-height: 40px;">
            Random Rants (NOT UPDATED GO <a href="https://randomrants.glitch.me">HERE</a>!)
          </span>
        </div>
      </div>
      <div style="width:100%;height:40px;"></div>
      <div id="usernameSetup">
        <span id="connectingState" class="connectingText"></span>
        <div class="sep1"></div>
        <label>Username:</label>
        <input
          type="text"
          id="username"
          oninput="typeSound();"
          class="roundborder inputText1"
          value=""
        /><br />
        <b style="color: red" id="errorMessageUsername"></b>
        <label>Profile Picture:</label>
        <button id="resetPFP" class="roundborder">Reset</button>
        <button
          id="loadPFP"
          class="roundborder"
          onclick="document.getElementById('pfpSelect').click();"
        >
          Load Profile Picture
        </button>
        <input
          type="file"
          id="pfpSelect"
          onclick="clickSound();"
          accept="image/*"
          onchange="setPFP(this);"
          hidden
        />
        <img
          class="profile"
          id="profilePreview"
          src="favicon.png"
          width="32"
          height="32"
        />
        <br />
        <label id="profilecolorexample">Color:</label>
        <input
          type="color"
          id="profilecolor"
          oninput="document.getElementById('profilecolorexample').style.color = this.value;"
        />
        <br />
        <span>Customize your Random Rants theme:</span>
        <button id="customizeChat" class="roundborder">
          Customize
        </button>
        <div id="activationDiv">
          <div class="sep1"></div>
          <b>Activate special commands:</b>
          <br>
          <span>To use slightly more annoying passwords, you are required to use a special password.<br>This can also be used to activate commands to control other users.</span>
          <br>
          <label>Password:</label>
          <input type="password" id="activateCommandsPassword" class="roundborder inputText1" placeholder="To activate special commands, use the password here!">
          <button id="activateCommandPassword" class="roundborder">
            Activate!
          </button>
        </div>
        <div class="sep1"></div>
        <label>Room:</label>
        <select
          type="text"
          class="roundborder inputText1"
          id="Server"
          style="width: fit-content"
          oninput="window.server = this.value;typeSound();"
        >
          <option selected value="serva" title="Room A">Room A</option>
          <option value="servb" title="Room B">Room B</option>
          <option value="servc" title="Room C">Room C</option>
          <option value="servd" title="Room D">Room D</option>
          <option value="serve" title="Room E">Room E</option>
          <option value="servf" title="Room F">Room F</option>
          <option value="servg" title="Room G">Room G</option>
          <option value="servh" title="Room H">Room H</option>
          <option value="servi" title="Room I">Room I</option>
          <option value="servj" title="Room J">Room J</option>
          <option value="servk" title="Room K">Room K</option>
          <option value="servl" title="Room L">Room L</option>
          <option value="servm" title="Room M">Room M</option>
          <option value="servn" title="Room N">Room N</option>
          <option value="servo" title="Room O">Room O</option>
          <option value="servp" title="Room P">Room P</option>
          <option value="servq" title="Room Q">Room Q</option>
          <option value="servr" title="Room R">Room R</option>
          <option value="servs" title="Room S">Room S</option>
          <option value="servt" title="Room T">Room T</option>
          <option value="servu" title="Room U">Room U</option>
          <option value="servv" title="Room V">Room V</option>
          <option value="servw" title="Room W">Room W</option>
          <option value="servx" title="Room X">Room X</option>
          <option value="servy" title="Room Y">Room Y</option>
          <option value="servz" title="Room Z">Room Z</option>
          <option value="serv1" title="Room 1">Room 1</option>
          <option value="serv2" title="Room 2">Room 2</option>
          <option value="serv3" title="Room 3">Room 3</option>
          <option value="serv4" title="Room 4">Room 4</option>
          <option value="serv5" title="Room 5">Room 5</option>
          <option value="serv6" title="Room 6">Room 6</option>
          <option value="serv7" title="Room 7">Room 7</option>
          <option value="serv8" title="Room 8">Room 8</option>
          <option value="serv9" title="Room 9">Room 9</option>
          <option value="serv10" title="Room 10">Room 10</option>
          <option value="beta" title="Beta Room">Beta Room</option>
        </select>
        <div class="sep1"></div>
        <button id="installApp">
          Install the app for easy access any time!
        </button>
        
        <div id="installAppPrompt" hidden>
          <div
            style="style"
            ="display:flex;text-align:center;width:100%;line-height:239px;"
          >
            <span style="">Click the "Install" button to finish.</span>
            <img
              src="installapp.png"
              height="239"
            />
          </div>
        </div>
        <button id="join" style="display: none" class="roundborder">
          Join!
        </button>
      </div>

      <div id="chat" style="display: none">
        <b id="usersTyping" style="position: fixed; bottom: 40px; left: 0"></b>
        <button
          onclick="window.location.reload();"
          class="roundborder"
          style="position: fixed; top: 0; left: 0; height: 40px"
        >
          Home
        </button>
        <div
          id="messages"
          class="roundborder"
          style="
            resize: none;
            font-size: 20px;
            width: 100%;
            height: calc(100vh - 200px);
            border: none;
            background-color: var(--messages-bg-color);
            color: var(--messages-text-color);
            overflow: auto;
            min-height: 150px;
            min-width: 200px;
          "
          disabled
        >
          <span id="messagesP" style="float: left; text-align: left;width:100%;height:100%;"></span>
        </div>
        <span>Message: </span>
        <input
          type="text"
          placeholder="Type something here..."
          oninput="typeSound();"
          id="typedMessage"
          class="roundborder textBoxColors"
          style="
            resize: none;
            font-size: 20px;
            width: 30%;
            height: 5%;
            border: none;
          "
        />
        <button id="Send" class="roundborder">Send</button>
        <button
          id="Clear"
          onclick="messages.children[0].innerHTML = '';clickSound();"
          class="roundborder"
        >
          Clear Chat
        </button>
        <br />
        <br />
        <div id="interactiveButtons">
          <button
            id="uploadImage"
            class="roundborder"
            onclick="
					document.getElementById('imgUploader').click();
					clickSound();
				"
          >
            Send Image
          </button>
          <input
            type="file"
            accept="image/*"
            onchange="uploadeIMGFile(this);"
            hidden
            id="imgUploader"
          />
          <button
            id="uploadAudio"
            class="roundborder"
            onclick="
					document.getElementById('uploadAudioFile').click();
					clickSound();
				"
          >
            Send Audio
          </button>
          <input
            type="file"
            accept="audio/*"
            onchange="uploadeAudioFile(this);"
            hidden
            id="uploadAudioFile"
          />
          <button
            id="uploadVideo"
            class="roundborder"
            onclick="
					document.getElementById('uploadVideoFile').click();
					clickSound();
				"
          >
            Send Video
          </button>
          <input
            type="file"
            accept="video/*"
            onchange="uploadeVideoFile(this);"
            hidden
            id="uploadVideoFile"
          />
          <button
            id="DUFile"
            class="roundborder"
            onclick="
					document.getElementById('DUFileUpload').click();
					clickSound();
				"
          >
            Send any file
          </button>
          <input
            type="file"
            onchange="DUFileUpload(this);"
            hidden
            id="DUFileUpload"
          />
          <button
            id="Emojis"
            class="roundborder"
            onclick="
					document.getElementById('emojiSelect').style.display = 'block';
					document.getElementById('chat').style.display = 'none';
					clickSound();
					loadEmojis();
				"
          >
            Emojis
          </button>
          <button id="enableMic" class="roundborder">
            Toggle Mic
          </button>
          <button
            class="roundborder"
            onclick="
				if (window.notifyEnabled == true) {
					window.notifyEnabled = false;
          this.textContent = 'Notify Me';
				} else {
					window.notifyEnabled = true;
          this.textContent = 'Do Not Notify Me';
				}"
          >
            Notify Me
          </button>
          <button
            class="roundborder"
            id="shareScreen"
            onclick="startCap();"
          >
            Screen share
          </button>
          <button onclick="window.customizeChatOpen();" class="roundborder">
          Customize
          </button>
        </div>
      </div>
      <div id="emojiSelect" style="display: none">
        <button
          onclick="
				document.getElementById('emojiSelect').style.display = 'none';
				document.getElementById('chat').style.display = 'block';
				clickSound();
				"
          class="roundborder"
        >
          Back
        </button>
        <hr />
        <div
          style="width: 100%; height: calc(100vh - 120px); overflow: auto"
          id="emojiContainer"
        ></div>
        <div
          hidden
          style="
            background-color: var(--selected-emoji-popup-dialog-bg-color);
            border-color: var(--selected-emoji-popup-dialog-border-color);
            border-style: solid;
            border-width: var(--selected-emoji-popup-dialog-border-width);
            color: var(--selected-emoji-popup-dialog-text-color);
            position: absolute;
            top: 50%;
            left: 50%;
            margin-left: -400px;
            margin-top: -100px;
            width: 800px;
            height: 200px;
          "
          id="EmojiAddNotice"
        >
          <h1>Emoji Added!</h1>
          <p>
            The emoji code is put in your chat message.<br />Click back to go
            back to the chat.
          </p>
          <br />
          <button
            onclick="document.getElementById('EmojiAddNotice').hidden = true;clickSound();"
            class="roundborder"
          >
            Ok
          </button>
        </div>
      </div>
    </center>
    <div id="uploadingfile" hidden>
      <style>
        .loader {
          width: 70px;
          height: 70px;
          border-radius: 50%;
          border-style: solid;
          border-width: 6px;
          border-color: var(--loading-spinner-color);
          position: relative;
          animation: prixClipFix var(--spinner-rotation-seconds) steps(100)
            infinite;
        }

        @keyframes prixClipFix {
          0% {
            clip-path: polygon(50% 50%, 0 0, 0 0, 0 0, 0 0, 0 0);
            transform: rotate(0deg);
          }
          50% {
            clip-path: polygon(50% 50%, 0 0, 100% 0, 100% 0, 100% 0, 100% 0);
            transform: rotate(180deg);
          }
          100% {
            clip-path: polygon(50% 50%, 0 0, 0 0, 0 0, 0 0, 0 0);
            transform: rotate(360deg);
          }
        }
      </style>
      <div
        style="
          opacity: 0.5;
          position: fixed;
          top: 0;
          left: 0;
          width: 100vw;
          height: 100vh;
          background: black;
        "
      ></div>
      <div
        style="
          border-radius: var(--border-radius);
          width: 600px;
          height: 400px;
          position: fixed;
          top: 50%;
          left: 50%;
          color: var(--popup-box-text-color);
          margin-left: -300px;
          margin-top: -200px;
          text-align: center;
          line-height: 180px;
          background: var(--popup-box-bg-color);
        "
      >
        <b style="color: var(--popup-box-text-color); font-size: 30px"> Uploading File... </b>
        <div style="line-height: 20px; color: var(--popup-box-text-color);">
          <span>
            Please wait... Uploading selected file...
            <br />
            <a style="color: var(--link-text-color);" href="https://macres-chat-file-viewer.glitch.me/">
              Please note that every file is permanently saved on the server and
              can be viewed by anyone, including non team members of the
              website.
            </a> </span
          ><br />
          <center>
            <progress
              hidden
              id="uploadFileProgress"
              min="0"
              max="100"
              value="0"
              style="width: 100%"
            ></progress>
            <div id="loadingCircle" class="loader" style=""></div>
          </center>
        </div>
      </div>
    </div>

    <div
      id="loadingCircle2"
      class="loader"
      style="position: fixed; top: calc(50% - 50px); left: calc(50% - 50px)"
    ></div>

    <div id="screenCaptureDiv" style="width: 400px; height: 240px" hidden>
      <button
        style="height: 20px"
        onclick="
			if (document.getElementById('screenCaptureDiv').getAttribute('style') == 'width:100%;height:100%;') {
				document.getElementById('screenCaptureDiv').setAttribute('style','width:400px;height:290px;');
			} else {
				document.getElementById('screenCaptureDiv').setAttribute('style','width:100%;height:100%;');
			}
			
			"
        class="roundborder"
      >
        View/Exit Fullscreen</button
      ><button
        style="height: 20px"
        class="roundborder"
        id="scAudioToggle"
      ></button
      ><canvas
        id="videoRecord"
        style="object-fit: contain;width:100%;height:calc(100% - 30px);"
        hidden
      ></canvas>
      <video id="videoRecordReal"
        style="width:100%;height:calc(100% - 30px);"></video>
    </div>
    <div id="customizeStuffTab" hidden>
      <div
        style="
          opacity: 0.5;
          position: fixed;
          top: 0;
          left: 0;
          width: 100vw;
          height: 100vh;
          background: black;
        "
      ></div>
      <div
        style="
          border-radius: var(--border-radius);
          width: calc(100vw - 200px);
          height: calc(100vh - 200px);
          position: fixed;
          top: 50%;
          left: 50%;
          color: var(--popup-box-text-color);
          margin-left: calc(calc(100vw - 200px) / -2);
          margin-top: calc(calc(100vh - 200px) / -2);
          text-align: center;
          background: var(--popup-box-bg-color);
          overflow-y: auto;
          overflow-x: hidden;
        "
      >
        <br>
        <b style="font-size:30px;">Customization</b>
        <br>
        <span>Note that your theme is saved on your browser, but not saved on our servers unless you upload it there, your theme gets automatically saved when you make changes to it.</span>
        <button
          class="roundborder"
          id="customizeChatExit"
          style="position: absolute; top: 0; left: 0; height: 40px"
        >
          Back
        </button>
        <div class="sep1"></div>
        <button
          class="roundborder"
          id="customizeChatReset"
        >
          Reset theme
        </button>
        <button
          class="roundborder"
          id="customizeChatSave"
        >
          Save theme file
        </button>
        <button
          class="roundborder"
          id="customizeChatLoad"
        >
          Load theme file
        </button>
        <div class="sep1"></div>
        <div id="customizeStuff"></div>
      </div>
    </div>
  </body>
</html>
<style>
  button {
    font-family: var(--main-font);
    border: 0;
    background-color: var(--button-bg-color);
    font-size: 20px;
    color: var(--button-text-color);
  }
  button:hover {
    background-color: var(--button-hover-bg-color);
    color: var(--button-text-color);
    cursor: pointer;
  }
  button[disabled] {
    background-color: var(--button-disabled-color);
  }
  a {
    font-family: var(--main-font);
    color: var(--link-text-color);
  }
</style>
<script>
  if (!window.errors) {
    window.errors = {};
  }
</script>
<script src="peerjs.min.js?n=1"></script>
<script src="lz-string.js?n=1"></script>
<script src="audengine.js?n=1"></script>
<script src="error-messages.js?n=1"></script>
<script src="data:text/plain;charset=utf-8;base64,LyoqDQpndmJ2ZHh4J3MgY2hhdCBmaWx0ZXIgZG9lcyBub3QgYWxsb3cgYW55IGJhZCB3b3JkcyBzYWlkIA0KKi8NCi8qY2hhdFNlcnZlci5mYWtlTWVzc2FnZSh7DQogICAgY29sb3I6ImdyZWVuIiwNCiAgICBtZXNzYWdlOiJndmJ2ZHh4J3MgYmV0dGVyIGNoYXQgZmlsdGVyIGhhcyBiZWVuIGxvYWRlZC4iDQp9KTsqLw0KLypGb3Igc2FmZSByZWFzb25zIHRvIG1ha2Ugc3VyZSB0aGUgYmFkIHdvcmRzIGFyZSBjb252ZXJ0ZWQgc28gdGhleSBhcmUgbm90IHJlYWRhYmxlIGJ5IGh1bWFucyBleWUqLw0KdmFyIGJhZFdvcmRzRW5jb2RlZCA9IFsNCgkiWm5WamF3PT0iLA0KCSJZWE56IiwNCgkiWVhOemFHOXNaUT09IiwNCgkiY0c5eWJnPT0iLA0KCSJjMmhwZEE9PSIsDQoJIlpHbGphdz09IiwNCgkiYUdWamF3PT0iLA0KCSJkM1JtIiwNCgkiZEdWemRHSmhaSGR2Y21RPSINCl07DQpmdW5jdGlvbiBmaWx0ZXJTdHJpbmcoc3RyaW5nKSB7DQoJdmFyIGkgPSAwOw0KCXZhciBiYWR3b3Jkc0RlY29kZWQgPSBbXTsNCgl3aGlsZSAoaSA8IGJhZFdvcmRzRW5jb2RlZC5sZW5ndGgpIHsNCgkJYmFkd29yZHNEZWNvZGVkLnB1c2goYXRvYihiYWRXb3Jkc0VuY29kZWRbaV0pKTsNCgkJaSArPSAxOw0KCX0NCgl2YXIgYmFkV29yZHNMb2NhdGVkID0gZmFsc2U7DQoJaSA9IDA7DQoJdmFyIHRleHRTcGxpdGVkID0gc3RyaW5nLnNwbGl0KCcgJyk7DQoJd2hpbGUgKGkgPCB0ZXh0U3BsaXRlZC5sZW5ndGgpIHsNCgkJaWYgKCEoYmFkd29yZHNEZWNvZGVkLmluZGV4T2YodGV4dFNwbGl0ZWRbaV0pKSA9PSAtMSkgew0KCQkJaWYgKCEoYmFkV29yZHNMb2NhdGVkKSkgew0KCQkJCWJhZFdvcmRzTG9jYXRlZCA9IHRydWU7DQoJCQl9DQoJCX0NCgkJaSArPSAxOw0KCX0NCgliYWRXb3Jkc0xvY2F0ZWQgPSBmYWxzZTsNCglyZXR1cm4gKGJhZFdvcmRzTG9jYXRlZCk7DQp9"></script>
<script src="badwords.js"></script>

<script  src="chat.js"></script>

<script src="adminchat.js?n=1"></script>
<script src="screen-share-2.js?n=1"></script>
<script src="confetti.js?n=1"></script>
<script>
  //Lame script that makes install button work.
  //Mostly copied and pasted from google chrome's web-application docs.
  var deferredPrompt = null;
  var btnAdd = document.getElementById("installApp");
  var installAppPrompt = document.getElementById("installAppPrompt");
  btnAdd.style.display = "none";
  installAppPrompt.hidden = true;
  window.addEventListener("beforeinstallprompt", (e) => {
    // Prevent Chrome 67 and earlier from automatically showing the prompt
    e.preventDefault();
    // Stash the event so it can be triggered later.
    deferredPrompt = e;
    // Update UI notify the user they can add to home screen
    btnAdd.style.display = "block";
    installAppPrompt.hidden = true;
  });

  btnAdd.addEventListener("click", (e) => {
    // hide our user interface that shows our A2HS button
    btnAdd.style.display = "none";
    installAppPrompt.hidden = false;
    // Show the prompt
    deferredPrompt.prompt();
    // Wait for the user to respond to the prompt
    deferredPrompt.userChoice.then((choiceResult) => {
      if (choiceResult.outcome === "accepted") {
        console.log("User accepted the A2HS prompt");
        installAppPrompt.hidden = true;
      } else {
        console.log("User dismissed the A2HS prompt");
      }
      deferredPrompt = null;
    });
  });
</script>
